[workspace.package]
version = "0.0.4"

[workspace]
members = [
  "crates/cli",
  "crates/configuration",
  "crates/dc-api",
  "crates/dc-api-test-helpers",
  "crates/dc-api-types",
  "crates/integration-tests",
  "crates/mongodb-agent-common",
  "crates/mongodb-connector",
  "crates/mongodb-support",
  "crates/ndc-test-helpers",
  "crates/test-helpers",
]
resolver = "2"

# The tag or rev of ndc-models must match the locked tag or rev of the
# ndc-models dependency of ndc-sdk
[workspace.dependencies]
ndc-sdk = { git = "https://github.com/hasura/ndc-sdk-rs.git" }
ndc-models = { git = "http://github.com/hasura/ndc-spec.git", tag = "v0.1.2" }

itertools = "^0.12.1"

# We have a fork of the mongodb driver with a fix for reading metadata from time
# series collections.
# See the upstream PR: https://github.com/mongodb/mongo-rust-driver/pull/1003
[patch.crates-io.mongodb]
git = "https://github.com/hasura/mongo-rust-driver.git"
branch = "time-series-fix"

# Set opt levels according to recommendations in insta documentation
[profile.dev.package]
insta.opt-level = 3
similar.opt-level = 3
